@model Dictionary<string, int>
@using CestaDeCompra.Data

@{

    ProductoRepo productoRepo = new();

    if(Model.LongCount() == 0)
    {
        <h1>Cesta vacía</h1>

        <button><a asp-controller="Producto" asp-action="Index">Seguir comprando</a></button>
    }
    else
    {
        foreach(KeyValuePair<string, int> cnt in Model)
        {
            Producto p = productoRepo.GetProducto(cnt.Key);

            if(cnt.Value > 0)
            {
                <div class="cesta-producto">
                    <img class="cesta-producto-img" src="/Img/@p.ImgNom" />
                    <p class="esta-producto-name">@p.Nombre</p>
                    <p class="esta-producto-price">@p.Precio</p>
                    <form asp-controller="Producto" asp-action="Actualizar" method="get">
                        <input type="hidden" name="producCode" value="@p.Codigo" />
                        <input type="number" name="nuevaCantidad" value="@cnt.Value" />
                        <input type="submit" name="update" value="Actualizar" />
                    </form>
                </div>
            }

        }

    }
}
